@page "/flights"
@using Assignment2.Data

@*list the available flights from the text file*@
<div id="flightsTop" class="flex">
        <div id="flights" class="flex">
            <div id="flightsTableHeader" class="flex">
                <h3>Flights</h3>
            </div>
            <div id="flightsTable" class="flex">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Code</th>
                            <th>Airline</th>
                            <th>From</th>
                            <th>To</th>
                            <th>Weekday</th>
                            <th>Time</th>
                            <th>Seats</th>
                            <th>Cost/Seat</th>
                        </tr>
                    </thead>
                    <tbody class="ft-body">
                        @foreach (var flight in flightList)
                        {
                            <tr>
                                <td>@flight.Code</td>
                                <td>@flight.Airline</td>
                                <td>@flight.From</td>
                                <td>@flight.To</td>
                                <td>@flight.Weekday</td>
                                <td>@flight.Time</td>
                                <td>@flight.Seats</td>
                                <td>@flight.CostPerSeat</td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>

@* RESERVE *@
    <div id="reserve" class="flex">
        <div id="reserveHeader" class="flex">
            <h3>Reserve</h3>
        </div>
        <div class="flex">
            <label for="flight" class="res-lcol">Flight:</label>
            <input type="text" class="res-rcol" />
        </div>
        <div class="flex">
            <label for="airline" class="res-lcol">Airline:</label>
            <input type="text" class="res-rcol" />
        </div>
        <div class="flex">
            <label for="day" class="res-lcol">Day:</label>
            <input type="text" class="res-rcol" />
        </div>
        <div class="flex">
            <label for="time" class="res-lcol">Time:</label>
            <input type="text" class="res-rcol" />
        </div>
        <div class="flex">
            <label for="cost" class="res-lcol">Cost:</label>
            <input type="text" class="res-rcol" />
        </div>

        <div class="flex">
            <label for="name" class="res-lcol">Name:</label>
            <input type="text" class="res-rcol" />
        </div>

        <div class="flex">
            <label for="citz" class="res-lcol">Citizenship:</label>
            <input type="text" class="res-rcol" />
        </div>

        <div>
            <button type="submit" class="btn btn-default btn-reserve">Reserve</button>
        </div>
    </div>


@* FLIGHTFINDER *@ 
    <div id="flightFinder" class="flex">
        <div id="flightFinderHeader" class="flex">
            <h3>Flight Finder</h3>
        </div>

        @*dropdown for 'FROM'*@
        <div class="from-dropdown flex">
            <label class="ff-lcol" @bind="fromInput">From: </label>
            <select class="ff-rcol" @onchange = "ShowAirport">
                <option>Select an Origin</option>
                @foreach(var a in airportList)
                {
                    <option value = "@a.Code">@a.Code</option>
                }
            </select>
        </div>

        @*dropdown for 'TO'*@
        <div class="to-dropdown flex">
            <label class="ff-lcol" @bind="toInput">To: </label>
            <select class="ff-rcol" @onchange="ShowAirport">
                <option>Select a Destination</option>
                @foreach (var a in airportList)
                {
                    <option value="@a.Code">@a.Code</option>
                }
            </select>
        </div>

        @*dropdown for 'DAY'*@
        <div class="day-dropdown flex">
            <label class="ff-lcol" @bind="weekdayInput">Day: </label>
            <select class="ff-rcol">
                <option>Select a Day</option>
                <option>Sunday</option>
                <option>Monday</option>
                <option>Tuesday</option>
                <option>Wednesday</option>
                <option>Thursday</option>
                <option>Friday</option>
                <option>Saturday</option>
            </select>
        </div>

        <button type="submit" class="btn btn-default ff-btn" Clicked="Find_Flight">Find Flights</button>
    </div>

</div>


@code {
    FlightManager fm = new FlightManager();
    List<Flight> flightList = FlightManager.GetFlights();
    List<Airport> airportList = FlightManager.GetAirports();
    public string selectedFlight;
    public string selectedAirport;
    public string fromInput;
    public string toInput;
    public string weekdayInput; 

    private void ShowFlight(ChangeEventArgs f)
    {
        selectedFlight = f.Value.ToString();
    }

    private void ShowAirport(ChangeEventArgs a)
    {
        selectedAirport = a.Value.ToString();
    }


    //Button function
    private async void Find_Flight(object sender, EventArgs e)
    {
       
    }
}
